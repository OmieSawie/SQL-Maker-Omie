import baseDataParsed from "../templateDatabases/tasks.json"


const queryName: string = "tasks";
const dataProperties:string[] = [] ;

try {
  // Check if the array has at least 3 elements and the third element is the tasks table
  if (Array.isArray(baseDataParsed) && baseDataParsed.length > 0) {
    let dataIdx = -1;
    for (let i = 0; i < baseDataParsed.length; i++) {
      if (baseDataParsed[i].type === 'table' && baseDataParsed[i].name === queryName) {
        dataIdx = i;
        break;
      }
    }
    if (dataIdx == -1) {
      throw new Error(`Unable to find <${queryName}> name in the JSON`)
    }
    const dataTable = baseDataParsed[dataIdx];
    const data = dataTable.data;

    // Check if the data property is an array and has at least one element
    if (Array.isArray(data) && data.length > 0) {
      const firstDataObject = data[0];
      console.log(firstDataObject);
      extractDataFromTable(data);
    } else {
      console.log(`No data found in the ${queryName} table.`);
    }
  } else {
    console.log(`The expected table structure with name ${queryName} was not found.`);
  }
} catch (error) {
  console.error('Error parsing JSON:', error);
}

var properties:string[];

function extractDataFromTable(data: Array<string>) {
  // console.log(data[1][Object.keys(data[0])[0]]);
  properties = (Object.keys(data[0]));
  // Populating the data properties first
  // dataProperties.push(Object.keys(data[0])); 
  
  console.log(properties);

}
